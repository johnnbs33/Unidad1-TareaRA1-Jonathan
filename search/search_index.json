{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#tarea-unidad-1-ra1","title":"Tarea Unidad 1 - RA1","text":""},{"location":"#objetivos","title":"Objetivos","text":"<ul> <li> <p>Analizar y comprender la estructura interna del c\u00f3digo (clases, m\u00e9todos, flujos de control) y su modelo de ejecuci\u00f3n (transiciones de estado y manejo de excepciones) para determinar los puntos cr\u00edticos de prueba.</p> </li> <li> <p>Aplicar las herramientas del IDE (Integrated Development Environment) para la ejecuci\u00f3n, depuraci\u00f3n paso a paso y seguimiento del flujo de control, identificando y resolviendo posibles errores l\u00f3gicos o de sintaxis.</p> </li> <li> <p>Dise\u00f1ar, implementar y ejecutar pruebas unitarias que cubran la totalidad de los requisitos funcionales y no funcionales, validando la l\u00f3gica individual de cada componente del c\u00f3digo.</p> </li> <li> <p>Verificar que la aplicaci\u00f3n maneja correctamente las reglas de negocio (precios, transiciones de fase y gesti\u00f3n de estados de error), tal como se define en la documentaci\u00f3n.</p> </li> <li> <p>Ejecutar la aplicaci\u00f3n en un entorno controlado para simular su comportamiento en un contexto real, validando la interacci\u00f3n entre sus componentes y el entorno de runtime.</p> </li> </ul>"},{"location":"#enlaces","title":"Enlaces","text":"<ol> <li>Elementos.</li> <li>Ejecuci\u00f3n y depuraci\u00f3n.</li> <li>Pruebas.</li> <li>Sandbox.</li> <li>Reflexiones.</li> </ol> <p>Autor: Jonathan Barbero S\u00e1nchez Curso de especializaci\u00f3n en Ciberseguridad en entornos de las Tecnolog\u00edas de la Informaci\u00f3n</p>"},{"location":"ejecucionDepuracion/","title":"Ejecuci\u00f3n y depuraci\u00f3n","text":""},{"location":"elementos/","title":"Elementos","text":""},{"location":"elementos/#documentacion-y-prueba-del-programa","title":"Documentaci\u00f3n y prueba del programa.","text":"<p>Elementos de Python</p> <ol> <li>Introducci\u00f3n.</li> <li>Aplicaci\u00f3n.</li> <li>Implementaci\u00f3n de los comentarios.<ol> <li>Fichero lavadero.py</li> <li>Fichero main_app.py</li> </ol> </li> </ol>"},{"location":"elementos/#introduccion","title":"Introducci\u00f3n.","text":"<p>Analizaremos el c\u00f3digo de la aplicaci\u00f3n lavadero, la cual se compone de dos ficheros:</p> <ul> <li><code>lavadero.py</code></li> <li><code>main_app.py</code></li> </ul>"},{"location":"elementos/#aplicacion","title":"Aplicaci\u00f3n.","text":"<p>La aplicaci\u00f3n modela el ciclo de vida completo del proceso de limpieza de un veh\u00edculo, funcionando como una m\u00e1quina de estados que gestiona las transiciones entre las distintas etapas del lavado seg\u00fan los servicios contratados.</p>"},{"location":"elementos/#comentarios-en-el-codigo","title":"Comentarios en el c\u00f3digo.","text":""},{"location":"elementos/#lavadero","title":"lavadero","text":"<p>El fichero <code>lavadero.py</code> contiene la clase Lavadero, la cual deglosaremos en los siguientes apartados:</p> <ol> <li>Clase</li> <li>Getters de la clase</li> <li>Funci\u00f3n terminar</li> <li>Funci\u00f3n hacerLavado</li> <li>La funci\u00f3n cobrar</li> <li>La funci\u00f3n avanzarFase</li> <li>La funci\u00f3n imprimir_fase</li> <li>La funci\u00f3n imprimir_estado</li> <li>La funci\u00f3n ejecutar_y_obtener_fases</li> </ol> <p></p>"},{"location":"elementos/#comenzamos-con-la-clase-lavadero-y-el-constructor","title":"Comenzamos con la clase Lavadero y el constructor.","text":"<pre><code>class Lavadero:\n    \"\"\"\n    Simula el estado y las operaciones de un t\u00fanel de lavado de coches.\n    Cumple con los requisitos de estado, avance de fase y reglas de negocio.\n    \"\"\"\n\n    FASE_INACTIVO = 0\n    FASE_COBRANDO = 1\n    FASE_PRELAVADO_MANO = 2\n    FASE_ECHANDO_AGUA = 3\n    FASE_ENJABONANDO = 4\n    FASE_RODILLOS = 5\n    FASE_SECADO_AUTOMATICO = 6\n    FASE_SECADO_MANO = 7\n    FASE_ENCERADO = 8\n\n    def __init__(self):\n        \"\"\"\n        Constructor de la clase Lavadero.\n        Inicializa los atributos privados relacionados con los ingresos, la fase actual\n        y el estado inicial y opciones de lavado.\n        \"\"\"\n        self.__ingresos = 0.0  # Acumulado de ingresos totales.\n        self.__fase = self.FASE_INACTIVO  # Estado inicial del lavadero.\n        self.__ocupado = False  # Indica si hay un coche siendo atendido.\n        self.__prelavado_a_mano = False  # Opci\u00f3n de prelavado manual.\n        self.__secado_a_mano = False  # Opci\u00f3n de secado manual.\n        self.__encerado = False  # Opci\u00f3n de encerado.\n        self.terminar()  # Asegura que el estado inicial sea consistente.\n</code></pre>"},{"location":"elementos/#aqui-se-definiran-dichas-propedades-o-getters-de-la-clase-que-permitiran-leer-atributos-privados-de-la-clase-como-si-fueran-variables-normales-protegiendo-los-datos-originales","title":"Aqu\u00ed se definir\u00e1n dichas propedades o getters de la clase, que permitir\u00e1n leer atributos privados de la clase como si fueran variables normales, protegiendo los datos originales.","text":"<pre><code>    @property\n    def fase(self):\n        \"\"\"Devuelve la fase actual del proceso de lavado.\"\"\"\n        return self.__fase\n\n    @property\n    def ingresos(self):\n        \"\"\"Devuelve el total de ingresos acumulados del lavadero.\"\"\"\n        return self.__ingresos\n\n    @property\n    def ocupado(self):\n        \"\"\"Devuelve True si el lavadero est\u00e1 actualmente ocupado, \n        False en caso contrario.\"\"\"\n        return self.__ocupado\n\n    @property\n    def prelavado_a_mano(self):\n        \"\"\"Devuelve True si se ha seleccionado la opci\u00f3n de prelavado a mano.\"\"\"\n        return self.__prelavado_a_mano\n\n    @property\n    def secado_a_mano(self):\n        \"\"\"Devuelve True si se ha seleccionado la opci\u00f3n de secado a mano.\"\"\"\n        return self.__secado_a_mano\n\n    @property\n    def encerado(self):\n        \"\"\"Devuelve True si se ha seleccionado la opci\u00f3n de encerado.\"\"\"\n        return self.__encerado\n</code></pre>"},{"location":"elementos/#metodo-terminar-cuyo-objetivo-principal-es-limpiar-toda-la-configuracion-actual-despues-de-que-un-proceso-de-lavado-ha-concluido-o-ha-sido-cancelado","title":"M\u00e9todo terminar cuyo objetivo principal es limpiar toda la configuraci\u00f3n actual despu\u00e9s de que un proceso de lavado ha concluido o ha sido cancelado.","text":"<pre><code>    def terminar(self):\n        \"\"\"\n        Restablece el lavadero a su estado inicial de inactividad.\n        Limpia las opciones seleccionadas y marca el lavadero como libre.\n        \"\"\"\n        self.__fase = self.FASE_INACTIVO\n        self.__ocupado = False\n        self.__prelavado_a_mano = False\n        self.__secado_a_mano = False\n        self.__encerado = False\n</code></pre>"},{"location":"elementos/#metodo-hacerlavado-es-el-punto-de-entrada-para-iniciar-un-servicio-de-lavado-su-trabajo-es-validar-que-el-pedido-sea-correcto-y-configurar-el-lavadero-para-empezar-a-funcionar","title":"M\u00e9todo hacerLavado, es el punto de entrada para iniciar un servicio de lavado. Su trabajo es validar que el pedido sea correcto y configurar el lavadero para empezar a funcionar.","text":"<pre><code>    def hacerLavado(self, prelavado_a_mano, secado_a_mano, encerado):\n        \"\"\"\n        Inicia un nuevo ciclo de lavado con las opciones especificadas.\n\n        Argumentos:\n            prelavado_a_mano (bool): Indica si se requiere prelavado manual.\n            secado_a_mano (bool): Indica si se requiere secado manual.\n            encerado (bool): Indica si se requiere encerado.\n\n        Manejador de errores:\n            RuntimeError: Si el lavadero ya est\u00e1 ocupado.\n            ValueError: Si se solicita encerado sin secado a mano, \n            el programa impide realizarlo as\u00ed.\n        \"\"\"\n        if self.__ocupado:\n            raise RuntimeError(\n                \"No se puede iniciar un nuevo lavado mientras el lavadero est\u00e1 ocupado\"\n            )\n\n        if not secado_a_mano and encerado:\n            raise ValueError(\"No se puede encerar el coche sin secado a mano\")\n\n        self.__fase = self.FASE_INACTIVO\n        self.__ocupado = True\n        self.__prelavado_a_mano = prelavado_a_mano\n        self.__secado_a_mano = secado_a_mano\n        self.__encerado = encerado\n</code></pre>"},{"location":"elementos/#metodo-cobrar-es-el-modulo-de-facturacion-del-lavadero-su-trabajo-es-calcular-cuanto-debe-pagar-el-cliente-y-sumar-ese-dinero-a-la-caja-total-del-lavadero","title":"M\u00e9todo cobrar, es el m\u00f3dulo de facturaci\u00f3n del lavadero. Su trabajo es calcular cu\u00e1nto debe pagar el cliente y sumar ese dinero a la caja total del lavadero.","text":"<pre><code>    def _cobrar(self):\n        \"\"\"\n        Calcula el coste total del lavado en funci\u00f3n de los servicios \n        adicionales seleccionados.\n        Actualiza el total de ingresos del lavadero.\n\n        Returns:\n            float: El precio calculado del lavado actual.\n        \"\"\"\n        coste_lavado = 5.00  # Precio base del lavado.\n\n        if self.__prelavado_a_mano:\n            coste_lavado += 1.50  # Suplemento por prelavado manual.\n\n        if self.__secado_a_mano:\n            coste_lavado += 1.20  # Suplemento por secado manual.\n\n        if self.__encerado:\n            coste_lavado += 1.00  # Suplemento por encerado.\n\n        self.__ingresos += coste_lavado\n        return coste_lavado\n</code></pre>"},{"location":"elementos/#metodo-avanzarfase-es-el-cerebro-logico-o-el-controlador-del-lavadero","title":"M\u00e9todo avanzarFase, es el cerebro l\u00f3gico o el controlador del lavadero.","text":"<pre><code>    def avanzarFase(self):\n        \"\"\"\n        Avanza el estado del lavadero a la siguiente fase l\u00f3gica.\n        Maneja las transiciones de estados y realiza acciones como cobrar o finalizar.\n        \"\"\"\n        if not self.__ocupado:\n            return  # Si no hay coche, no hacemos nada.\n\n        if self.__fase == self.FASE_INACTIVO:\n            # Al iniciar, cobramos y pasamos a estado COBRANDO.\n            coste_cobrado = self._cobrar()\n            self.__fase = self.FASE_COBRANDO\n            print(f\" (COBRADO: {coste_cobrado:.2f} \u20ac) \", end=\"\")\n\n        elif self.__fase == self.FASE_COBRANDO:\n            # Decidimos si vamos a prelavado manual o directo al agua.\n            if self.__prelavado_a_mano:\n                self.__fase = self.FASE_PRELAVADO_MANO\n            else:\n                self.__fase = self.FASE_ECHANDO_AGUA\n\n        elif self.__fase == self.FASE_PRELAVADO_MANO:\n            # Del prelavado manual pasamos a echar agua.\n            self.__fase = self.FASE_ECHANDO_AGUA\n\n        elif self.__fase == self.FASE_ECHANDO_AGUA:\n            # De echar agua pasamos a enjabonar.\n            self.__fase = self.FASE_ENJABONANDO\n\n        elif self.__fase == self.FASE_ENJABONANDO:\n            # De enjabonar pasamos a los rodillos.\n            self.__fase = self.FASE_RODILLOS\n\n        elif self.__fase == self.FASE_RODILLOS:\n            # Tras los rodillos, decidimos tipo de secado.\n            if self.__secado_a_mano:\n                self.__fase = self.FASE_SECADO_AUTOMATICO\n            else:\n                self.__fase = self.FASE_SECADO_MANO\n\n        elif self.__fase == self.FASE_SECADO_AUTOMATICO:\n            # Fin tras secado autom\u00e1tico.\n            self.terminar()\n\n        elif self.__fase == self.FASE_SECADO_MANO:\n            # Fin tras secado a mano.\n            self.terminar()\n\n        elif self.__fase == self.FASE_ENCERADO:\n            # Fin tras encerado.\n            self.terminar()\n\n        \"\"\"    \n        Si por alg\u00fan error de programaci\u00f3n \n        el lavadero entra en una fase que no existe.\n        \"\"\"\n        else:\n            raise RuntimeError(\n                f\"Estado no v\u00e1lido: Fase {self.__fase}. El lavadero va a estallar...\"\n            )\n</code></pre>"},{"location":"elementos/#metodo-imprimir_fase-es-la-encargada-de-la-interfaz-de-usuario-permitiendo-que-cualquier-persona-sepa-exactamente-que-esta-pasando-en-el-lavadero-en-cada-momento","title":"M\u00e9todo imprimir_fase, es la encargada de la interfaz de usuario, permitiendo que cualquier persona sepa exactamente qu\u00e9 est\u00e1 pasando en el lavadero en cada momento.","text":"<pre><code>    def imprimir_fase(self):\n        \"\"\"\n        Imprime por pantalla la descripci\u00f3n textual de la fase actual.\n        Utiliza un diccionario para mapear los c\u00f3digos de fase a texto.\n        \"\"\"\n        fases_map = {\n            self.FASE_INACTIVO: \"0 - Inactivo\",\n            self.FASE_COBRANDO: \"1 - Cobrando\",\n            self.FASE_PRELAVADO_MANO: \"2 - Haciendo prelavado a mano\",\n            self.FASE_ECHANDO_AGUA: \"3 - Ech\u00e1ndole agua\",\n            self.FASE_ENJABONANDO: \"4 - Enjabonando\",\n            self.FASE_RODILLOS: \"5 - Pasando rodillos\",\n            self.FASE_SECADO_AUTOMATICO: \"6 - Haciendo secado autom\u00e1tico\",\n            self.FASE_SECADO_MANO: \"7 - Haciendo secado a mano\",\n            self.FASE_ENCERADO: \"8 - Encerando a mano\",\n        }\n        print(\n            fases_map.get(self.__fase, f\"{self.__fase} - En estado no v\u00e1lido\"), end=\"\"\n        )\n</code></pre>"},{"location":"elementos/#metodo-imprimir_estado-es-el-generador-de-informes-o-el-panel-de-control-visual-de-la-aplicacion-su-trabajo-es-mostrarle-al-usuario-o-al-administrador-del-lavadero-una-foto-exacta-de-que-esta-pasando-en-ese-preciso-momento","title":"M\u00e9todo imprimir_estado, es el generador de informes o el panel de control visual de la aplicaci\u00f3n. Su trabajo es mostrarle al usuario (o al administrador del lavadero) una \"foto\" exacta de qu\u00e9 est\u00e1 pasando en ese preciso momento.","text":"<pre><code>    def imprimir_estado(self):\n        \"\"\"\n        Imprime un informe completo del estado actual del lavadero,\n        incluyendo ingresos, ocupaci\u00f3n, configuraci\u00f3n de lavado y fase actual.\n        \"\"\"\n        print(\"----------------------------------------\")\n        print(f\"Ingresos Acumulados: {self.ingresos:.2f} \u20ac\")\n        print(f\"Ocupado: {self.ocupado}\")\n        print(f\"Prelavado a mano: {self.prelavado_a_mano}\")\n        print(f\"Secado a mano: {self.secado_a_mano}\")\n        print(f\"Encerado: {self.encerado}\")\n        print(\"Fase: \", end=\"\")\n        self.imprimir_fase()\n        print(\"\\n----------------------------------------\")\n</code></pre>"},{"location":"elementos/#metodo-ejecutar_y_obtener_fases-es-el-simulador-automatico-del-sistema-su-trabajo-es-ejecutar-un-proceso-de-lavado-completo-de-principio-a-fin-y-registrar-todo-lo-que-sucede-en-una-lista","title":"M\u00e9todo ejecutar_y_obtener_fases, es el simulador autom\u00e1tico del sistema. Su trabajo es ejecutar un proceso de lavado completo de principio a fin y registrar todo lo que sucede en una lista.","text":"<pre><code>def ejecutar_y_obtener_fases(self, prelavado, secado, encerado):\n    \"\"\"\n    Ejecuta un ciclo completo y devuelve la lista de fases visitadas.\n    \u00datil para pruebas o simulaci\u00f3n.\n\n    Argumetnos:\n        self (Lavadero): Instancia del lavadero a controlar.\n        prelavado (bool): Opci\u00f3n de prelavado.\n        secado (bool): Opci\u00f3n de secado.\n        encerado (bool): Opci\u00f3n de encerado.\n\n    Returns:\n        list: Lista de fases por las que ha pasado el lavadero.\n    \"\"\"\n    self._hacer_lavado(\n        prelavado, secado, encerado\n    )\n    fases_visitadas = [self.fase]\n\n    while self.ocupado:\n        # Usamos un l\u00edmite de pasos para evitar bucles infinitos \n        # en caso de error o configuraci\u00f3n c\u00edclica\n        if len(fases_visitadas) &gt; 15:\n            raise Exception(\"Bucle infinito detectado en la simulaci\u00f3n de fases.\")\n        self.avanzarFase()  # Avanza un paso en la m\u00e1quina de estados\n        fases_visitadas.append(self.fase)  # Registra la nueva fase\n\n    return fases_visitadas\n</code></pre>"},{"location":"elementos/#main_app","title":"main_app","text":"<p>Con fichero <code>main_app.py</code> iniciaremos una instancia para probar la clase lavadero explicada anteriormente.</p> <ol> <li>Importaci\u00f3n de la clase Lavadero</li> <li>Inicializaci\u00f3n de la aplicaci\u00f3n</li> </ol> <p></p>"},{"location":"elementos/#importamos-la-clase-lavadero-para-utilizarla","title":"Importamos la clase lavadero para utilizarla.","text":"<pre><code># main_app.py\n\n# Importar la clase desde el otro archivo (m\u00f3dulo)\nfrom lavadero import Lavadero\n</code></pre>"},{"location":"elementos/#inicializamos-la-aplicacion-lavadero","title":"Inicializamos la aplicaci\u00f3n lavadero.","text":"<pre><code># MODIFICACI\u00d3N CLAVE AQU\u00cd: La funci\u00f3n ahora acepta 3 argumentos\ndef ejecutarSimulacion(lavadero, prelavado, secado_mano, encerado):\n    \"\"\"\n    Simula el proceso de lavado para un veh\u00edculo con las opciones dadas.\n    Ahora acepta una instancia de lavadero.\n\n    :param lavadero: Instancia de Lavadero.\n    :param prelavado: bool, True si se solicita prelavado a mano.\n    :param secado_mano: bool, True si se solicita secado a mano.\n    :param encerado: bool, True si se solicita encerado.\n    \"\"\"\n\n    print(\"--- INICIO: Prueba de Lavado con Opciones Personalizadas ---\")\n</code></pre> <pre><code># Mostrar las opciones solicitadas\n    print(f\"Opciones solicitadas: [Prelavado: {prelavado}, Secado a mano: {secado_mano}, Encerado: {encerado}]\")\n</code></pre> <pre><code>    # 1. Iniciar el lavado\n    try:\n        # Esto establece las opciones y pasa a Fase 0 (Inactivo, pero Ocupado=True)\n        lavadero.hacerLavado(prelavado, secado_mano, encerado)\n        print(\"\\nCoche entra. Estado inicial:\")\n        lavadero.imprimir_estado()\n\n        # 2. Avanza por las fases\n        print(\"\\nAVANZANDO FASE POR FASE:\")\n\n        # Usamos un contador para evitar bucles infinitos en caso de error o bucles inesperados\n        pasos = 0\n        while lavadero.ocupado and pasos &lt; 20: \n            # El cobro ahora ocurre en la primera llamada a avanzarFase (transici\u00f3n 0 -&gt; 1)\n            lavadero.avanzarFase()\n            print(f\"-&gt; Fase actual: \", end=\"\")\n            lavadero.imprimir_fase()\n            print() \n            pasos += 1\n\n        print(\"\\n----------------------------------------\")\n        print(\"Lavado completo. Estado final:\")\n        lavadero.imprimir_estado()\n        print(f\"Ingresos acumulados: {lavadero.ingresos:.2f} \u20ac\")\n        print(\"----------------------------------------\")\n\n    except ValueError as e: # Captura la excepci\u00f3n de regla de negocio (Requisito 2)\n        print(f\"ERROR DE ARGUMENTO: {e}\")\n    except RuntimeError as e: # Captura la excepci\u00f3n de estado (Requisito 3)\n        print(f\"ERROR DE ESTADO: {e}\")\n    except Exception as e:\n        print(f\"ERROR INESPERADO: {e}\")\n</code></pre> <pre><code># Punto de entrada (main): Aqu\u00ed pasamos los par\u00e1metros\nif __name__ == \"__main__\":\n\n    lavadero_global = Lavadero() # Usamos una \u00fanica instancia para acumular ingresos\n\n    # EJEMPLO 1: Lavado completo con prelavado, secado a mano, con encerado (Requisito 8 y 14)\n    # Precio esperado: 5.00 + 1.50 + 1.00 + 1.20 = 8.70 \u20ac\n    print(\"\\n=======================================================\")\n    print(\"EJEMPLO 1: Prelavado (S), Secado a mano (S), Encerado (S)\")\n    ejecutarSimulacion(lavadero_global, prelavado=True, secado_mano=True, encerado=True)\n\n    # EJEMPLO 2: Lavado r\u00e1pido sin extras (Requisito 9)\n    # Precio esperado: 5.00 \u20ac\n    print(\"\\n=======================================================\")\n    print(\"EJEMPLO 2: Sin extras (Prelavado: N, Secado a mano: N, Encerado: N)\")\n    ejecutarSimulacion(lavadero_global, prelavado=False, secado_mano=False, encerado=False)\n\n    # EJEMPLO 3: Lavado con encerado, pero sin secado a mano (Debe lanzar ValueError - Requisito 2)\n    print(\"\\n=======================================================\")\n    print(\"EJEMPLO 3: ERROR (Encerado S, Secado a mano N)\")\n    ejecutarSimulacion(lavadero_global, prelavado=False, secado_mano=False, encerado=True)\n\n    # EJEMPLO 4: Lavado con prelavado a mano (Requisito 4 y 10)\n    # Precio esperado: 5.00 + 1.50 = 6.50 \u20ac\n    print(\"\\n=======================================================\")\n    print(\"EJEMPLO 4: Prelavado (S), Secado a mano (N), Encerado (N)\")\n    ejecutarSimulacion(lavadero_global, prelavado=True, secado_mano=False)\n</code></pre>"},{"location":"pruebas/","title":"Pruebas","text":""},{"location":"reflexiones/","title":"Reflexiones","text":""},{"location":"sandbox/","title":"Sandbox","text":""}]}